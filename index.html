```html
<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>å¾ªç’°è³½ç³»çµ±</title>

<style>
body{
  font-family: Arial;
  margin:10px;
}
.container{
  display:flex;
  flex-wrap:wrap;
  gap:20px;
}
table{
  border-collapse: collapse;
  font-size:14px;
}
td,th{
  border:1px solid #ccc;
  padding:6px;
  text-align:center;
}
input{
  width:55px;
  text-align:center;
}
.rank{
  font-size:16px;
}
@media(max-width:800px){
  .container{flex-direction:column;}
}
</style>
</head>
<body>

<h2>å¾ªç’°è³½ç³»çµ±</h2>

<div>
ç©å®¶åç¨±ï¼š
<input id="playerNames" style="width:300px"
placeholder="ç”¨é€—è™Ÿåˆ†éš” ä¾‹: A,B,C,D,E,F,G,H">
<button onclick="setPlayers()">å»ºç«‹è³½è¡¨</button>
</div>

<br>

<div class="container">
<div>
<h3>å°æˆ°è¼¸å…¥</h3>
<table id="scoreTable"></table>
</div>

<div>
<h3>æ’å</h3>
<table>
<thead>
<tr>
<th>#</th>
<th>ç©å®¶</th>
<th>å‹</th>
<th>æ•—</th>
<th>å°åˆ†</th>
</tr>
</thead>
<tbody id="rankBody"></tbody>
</table>
</div>
</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-database-compat.js"></script>

<script>
// ğŸ”´ è²¼ä¸Šä½ çš„ firebaseConfig
const firebaseConfig = {
  apiKey: "AIzaSyCtXt_zgFXgAaUJxq-WFPJvkAQ5agegDok",
  authDomain: "gscrl-ranking-system.firebaseapp.com",
  databaseURL: "https://gscrl-ranking-system-default-rtdb.firebaseio.com",
  projectId: "gscrl-ranking-system",
  storageBucket: "gscrl-ranking-system.firebasestorage.app",
  messagingSenderId: "402703359156",
  appId: "1:402703359156:web:ac3cb76bbb0288f5cc4be1"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();

let players=[];
let stats={};

function setPlayers(){
  const text=document.getElementById("playerNames").value;
  players=text.split(",").map(x=>x.trim());
  db.ref("tournament/players").set(players);
}

// ç›£è½ç©å®¶
db.ref("tournament/players").on("value",snap=>{
  if(!snap.exists()) return;
  players=snap.val();
  buildTable();
});

// å»ºç«‹è¡¨æ ¼
function buildTable(){
  const table=document.getElementById("scoreTable");
  table.innerHTML="";

  let header="<tr><th></th>";
  players.forEach(p=> header+=`<th>${p}</th>`);
  header+="</tr>";
  table.innerHTML+=header;

  players.forEach((p1,i)=>{
    let row=`<tr><th>${p1}</th>`;
    players.forEach((p2,j)=>{
      if(i===j){
        row+="<td>-</td>";
      }else if(i<j){
        row+=`<td>
        <input placeholder="2:1"
        onchange="saveScore('${p1}','${p2}',this.value)">
        </td>`;
      }else{
        row+="<td></td>";
      }
    });
    row+="</tr>";
    table.innerHTML+=row;
  });

  loadScores();
}

// å„²å­˜
function saveScore(p1,p2,val){
  db.ref(`tournament/scores/${p1}_${p2}`).set(val);
}

// ç›£è½æ¯”åˆ†
function loadScores(){
  db.ref("tournament/scores").on("value",snap=>{
    if(!snap.exists()) return;

    const data=snap.val();
    document.querySelectorAll("input").forEach(inp=>{
      const p1=inp.closest("td").parentElement.cells[0].innerText;
      const col=inp.parentElement.cellIndex;
      const p2=players[col-1];

      const key=`${p1}_${p2}`;
      if(data[key]) inp.value=data[key];
    });

    calc();
  });
}

function calc(){
  stats={};
  players.forEach(p=>{
    stats[p]={win:0,lose:0,small:0};
  });

  document.querySelectorAll("input").forEach(inp=>{
    const val=inp.value;
    if(!val.includes(":")) return;

    const [a,b]=val.split(":").map(Number);
    if(isNaN(a)||isNaN(b)) return;

    const row=inp.closest("tr").rowIndex-1;
    const col=inp.parentElement.cellIndex-1;

    const p1=players[row];
    const p2=players[col];

    stats[p1].small+=a-b;
    stats[p2].small+=b-a;

    if(a>b){
      stats[p1].win++;
      stats[p2].lose++;
    }else{
      stats[p2].win++;
      stats[p1].lose++;
    }
  });

  renderRank();
}

function renderRank(){
  const arr=players.map(p=>({name:p,...stats[p]}));

  arr.sort((a,b)=>{
    if(b.win!==a.win) return b.win-a.win;
    return b.small-a.small;
  });

  const body=document.getElementById("rankBody");
  body.innerHTML="";

  arr.forEach((p,i)=>{
    body.innerHTML+=`
    <tr class="rank">
    <td>${i+1}</td>
    <td>${p.name}</td>
    <td>${p.win}</td>
    <td>${p.lose}</td>
    <td>${p.small}</td>
    </tr>`;
  });
}
</script>
</body>
</html>
```
